# Telegram Helper

FastAPI-—Å–µ—Ä–≤–∏—Å –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ –Ω–æ–≤–æ—Å—Ç–µ–π –∏–∑ Telegram-–∫–∞–Ω–∞–ª–æ–≤ —Å AI-—Å—É–º–º–∞—Ä–∏–∑–∞—Ü–∏–µ–π, –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–µ–π, ML-—Å–∫–æ—Ä–∏–Ω–≥–æ–º –∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–µ–π –≤ –≤—ã—Ö–æ–¥–Ω–æ–π –∫–∞–Ω–∞–ª.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- –ß—Ç–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π –∏–∑ –ø–∞–ø–∫–∏ Telegram-–∫–∞–Ω–∞–ª–æ–≤
- AI-—Å—É–º–º–∞—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ OpenAI GPT
- TF-IDF + GPT –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è (–¥–≤—É—Ö—ç—Ç–∞–ø–Ω–∞—è)
- ML-—Å–∫–æ—Ä–∏–Ω–≥ —Å–æ–æ–±—â–µ–Ω–∏–π –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π (—Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è low score)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—É–±–ª–∏–∫–∞—Ü–∏—è –≤ –≤—ã—Ö–æ–¥–Ω–æ–π –∫–∞–Ω–∞–ª
- –ë–æ—Ç-—Ä–µ–∞–∫—Ü–∏–∏ –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ prediction score
- –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –¥–∞–π–¥–∂–µ—Å—Ç —Ç–æ–ø-–Ω–æ–≤–æ—Å—Ç–µ–π —Å inline-–∫–Ω–æ–ø–∫–æ–π –ø–æ–¥–ø–∏—Å–∫–∏
- –ü–æ–¥—Å—á—ë—Ç –≤–∑–≤–µ—à–µ–Ω–Ω—ã—Ö —Ä–µ–∞–∫—Ü–∏–π –¥–ª—è —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏—è
- Web-–¥–∞—à–±–æ—Ä–¥ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- REST API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- Docker-–¥–µ–ø–ª–æ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä

## Tech Stack

- **Python 3.11+**
- **FastAPI** ‚Äî Web framework
- **Telethon** ‚Äî Telegram client
- **OpenAI API** ‚Äî –°—É–º–º–∞—Ä–∏–∑–∞—Ü–∏—è –∏ –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è
- **SQLite** ‚Äî –õ–æ–∫–∞–ª—å–Ω–∞—è –ë–î (thread-safe)
- **scikit-learn** ‚Äî TF-IDF –¥–ª—è –ø—Ä–µ–¥—Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤, SGDClassifier –¥–ª—è —Å–∫–æ—Ä–∏–Ω–≥–∞
- **Jinja2** ‚Äî –®–∞–±–ª–æ–Ω—ã —Å–æ–æ–±—â–µ–Ω–∏–π
- **Ruff** ‚Äî –õ–∏–Ω—Ç–∏–Ω–≥ –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
‚îú‚îÄ‚îÄ main.py                  # FastAPI app, cron worker, endpoints, –¥–∞—à–±–æ—Ä–¥
‚îú‚îÄ‚îÄ config.py                # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏–∑ env / GCP Secret Manager
‚îú‚îÄ‚îÄ deploy.sh                # –î–µ–ø–ª–æ–π –Ω–∞ DigitalOcean –¥—Ä–æ–ø–ª–µ—Ç
‚îú‚îÄ‚îÄ Dockerfile               # Docker-–æ–±—Ä–∞–∑
‚îú‚îÄ‚îÄ docker-compose.yml       # Docker Compose –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ requirements.txt         # Python-–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ pyproject.toml           # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ruff
‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îú‚îÄ‚îÄ models.py            # Dataclasses: ReadMessage, SentMessage
‚îÇ   ‚îú‚îÄ‚îÄ processor.py         # –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ (pipeline)
‚îÇ   ‚îú‚îÄ‚îÄ gpt_utils.py         # OpenAI API: —Å—É–º–º–∞—Ä–∏–∑–∞—Ü–∏—è, –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ text_similarity.py   # TF-IDF + Cosine Similarity
‚îÇ   ‚îú‚îÄ‚îÄ msg_helper.py        # –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π –¥–ª—è Telegram
‚îÇ   ‚îú‚îÄ‚îÄ subscribers_cache.py # In-memory –∫—ç—à –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤ + —Ç—Ä–∏–≥–≥–µ—Ä –¥–∞–π–¥–∂–µ—Å—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ scorer/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ scorer.py        # NewsScorer: SGDClassifier, predict/train
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ features.py      # –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ñ–∏—á–µ–π –¥–ª—è —Å–∫–æ—Ä–µ—Ä–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ reaction.py      # –í—ã–±–æ—Ä –±–æ—Ç-—Ä–µ–∞–∫—Ü–∏–∏, –≤–µ—Å–∞ —Ä–µ–∞–∫—Ü–∏–π
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ embedder.py      # –≠–º–±–µ–¥–¥–∏–Ω–≥–∏ —Ç–µ–∫—Å—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ sqlite/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ connection.py    # Thread-safe —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å –ë–î
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ schema.py        # –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü –∏ –º–∏–≥—Ä–∞—Ü–∏–∏
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ messages.py      # CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è read/sent messages
‚îÇ   ‚îî‚îÄ‚îÄ telegram/
‚îÇ       ‚îú‚îÄ‚îÄ reader.py        # –ß—Ç–µ–Ω–∏–µ –∫–∞–Ω–∞–ª–æ–≤ –∏–∑ –ø–∞–ø–∫–∏
‚îÇ       ‚îî‚îÄ‚îÄ sender.py        # –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –∏ –¥–∞–π–¥–∂–µ—Å—Ç–∞
‚îú‚îÄ‚îÄ static/
‚îÇ   ‚îú‚îÄ‚îÄ dashboard.html               # Web-–¥–∞—à–±–æ—Ä–¥
‚îÇ   ‚îú‚îÄ‚îÄ sent_messages.html            # –°—Ç—Ä–∞–Ω–∏—Ü–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ summarize_prompt.txt          # –ü—Ä–æ–º–ø—Ç —Å—É–º–º–∞—Ä–∏–∑–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ deduplicate_prompt.txt        # –ü—Ä–æ–º–ø—Ç –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–∏ (batch)
‚îÇ   ‚îú‚îÄ‚îÄ deduplicate_pair_prompt.txt   # –ü—Ä–æ–º–ø—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–∞—Ä—ã
‚îÇ   ‚îú‚îÄ‚îÄ telegram_summary_template.html # –®–∞–±–ª–æ–Ω —Å–æ–æ–±—â–µ–Ω–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ daily_digest_template.txt     # –®–∞–±–ª–æ–Ω –¥–∞–π–¥–∂–µ—Å—Ç–∞
```

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
pip install -r requirements.txt
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ `.env` —Ñ–∞–π–ª (—Å–º. `.env.example`):

```env
TGHELPER_API_ID=your_api_id
TGHELPER_API_HASH=your_api_hash
TGHELPER_BOT_TOKEN=your_bot_token
OPENAI_API_KEY=your_openai_key
TGHELPER_FOLDER_NAME=–ù–æ–≤–æ—Å—Ç–∏
TGHELPER_OUTPUT_CHANNEL_ID=@your_channel
```

### 3. –ó–∞–ø—É—Å–∫

```bash
# Development
uvicorn main:app --reload

# Production (Docker)
docker-compose up -d

# –î–µ–ø–ª–æ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä
./deploy.sh <droplet-ip> [ssh-key-path]
```

## Pipeline

### Step 1: Read Messages
–ß—Ç–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π –∏–∑ –∫–∞–Ω–∞–ª–æ–≤ –ø–∞–ø–∫–∏ –∑–∞ —É–∫–∞–∑–∞–Ω–Ω—ã–π –ø–µ—Ä–∏–æ–¥.
–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è: –ø—Ä–æ–ø—É—Å–∫ `#—Ä–µ–∫–ª–∞–º–∞` –∏ —Å–æ–æ–±—â–µ–Ω–∏–π –∫–æ—Ä–æ—á–µ 100 —Å–∏–º–≤–æ–ª–æ–≤.

### Step 2: Clean Messages
–û—á–∏—Å—Ç–∫–∞ —Ç–µ–∫—Å—Ç–∞, —É–¥–∞–ª–µ–Ω–∏–µ markdown-—Ä–∞–∑–º–µ—Ç–∫–∏, –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ URL –∏ —Ö–µ—à—Ç–µ–≥–æ–≤.

### Step 3: Summarize
AI-—Å—É–º–º–∞—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ GPT: –≥–µ–Ω–µ—Ä–∞—Ü–∏—è summary, headline, hashtags.

### Step 4: Deduplicate
–î–≤—É—Ö—ç—Ç–∞–ø–Ω–∞—è –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è:
1. **TF-IDF** ‚Äî –±—ã—Å—Ç—Ä–∞—è –ø—Ä–µ–¥—Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Å—Ö–æ–∂–µ—Å—Ç–∏ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤
2. **GPT** ‚Äî —Ç–æ—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞—Ä-–∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤

### Step 5: Generate Text
–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –¥–ª—è Telegram (HTML, —Å—Å—ã–ª–∫–∏, –∏—Å—Ç–æ—á–Ω–∏–∫–∏).
–ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö —Ö–µ—à—Ç–µ–≥–æ–≤ ‚Äî –±–µ–∑ –Ω–∏—Ö `state='no_send'`.

### Step 5.5: Pre-send Scoring
ML-—Å–∫–æ—Ä–∏–Ω–≥ –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π —á–µ—Ä–µ–∑ `NewsScorer` (SGDClassifier).
–ï—Å–ª–∏ `prediction_score <= neg_threshold` ‚Äî —Å –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å—é `low_score_send_probability` —Å–æ–æ–±—â–µ–Ω–∏–µ –≤—Å—ë —Ä–∞–≤–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è, –∏–Ω–∞—á–µ `state='low_score'`.

### Step 6: Send
–û—Ç–ø—Ä–∞–≤–∫–∞ –Ω–æ–≤—ã—Ö / –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –∫–∞–Ω–∞–ª.

### Step 6.5: Bot Reactions
–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–æ—Ç-—Ä–µ–∞–∫—Ü–∏–π (üëç/üëé) –Ω–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ prediction_score.

### Step 7: Read Reactions
–ü–æ–¥—Å—á—ë—Ç –≤–∑–≤–µ—à–µ–Ω–Ω—ã—Ö —Ä–µ–∞–∫—Ü–∏–π –∏ —Ä–∞—Å—á—ë—Ç `normalized_score` –¥–ª—è —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏—è –≤ –¥–∞–π–¥–∂–µ—Å—Ç–µ.

### Step 7.5: Train Scorer
–û–±—É—á–µ–Ω–∏–µ `NewsScorer` –Ω–∞ —Ä–µ–∞–∫—Ü–∏—è—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (online learning, `partial_fit`).
–°–æ–æ–±—â–µ–Ω–∏—è —Å `state='low_score'` –Ω–µ —É—á–∞—Å—Ç–≤—É—é—Ç –≤ –æ–±—É—á–µ–Ω–∏–∏.

### Step 8: Daily Digest
–¢—Ä–∏–≥–≥–µ—Ä –≤ 12:00 UTC ‚Äî –¥–∞–π–¥–∂–µ—Å—Ç —Ç–æ–ø-10 –Ω–æ–≤–æ—Å—Ç–µ–π –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –¥–Ω—è –ø–æ `normalized_score`.
–ü–∏–Ω–Ω–∏—Ç—Å—è –≤ –∫–∞–Ω–∞–ª–µ, —Å–æ–¥–µ—Ä–∂–∏—Ç inline-–∫–Ω–æ–ø–∫—É –ø–æ–¥–ø–∏—Å–∫–∏.

## –°—Ç–∞—Ç—É—Å—ã —Å–æ–æ–±—â–µ–Ω–∏–π (SentMessage)

| –°—Ç–∞—Ç—É—Å | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|----------|
| `new` | –°–æ–∑–¥–∞–Ω–æ –ø–æ—Å–ª–µ –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–∏ |
| `to_send` | –¢–µ–∫—Å—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω, –≥–æ—Ç–æ–≤–æ –∫ –æ—Ç–ø—Ä–∞–≤–∫–µ |
| `to_update` | –ù–∞–π–¥–µ–Ω –¥—É–±–ª–∏–∫–∞—Ç, –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å —Ç–µ–∫—Å—Ç |
| `no_send` | –ù–µ—Ç –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö —Ö–µ—à—Ç–µ–≥–æ–≤ |
| `low_score` | –û—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–æ pre-send —Å–∫–æ—Ä–∏–Ω–≥–æ–º |
| `sent` | –£—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ |
| `error` | –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ |
| `renew` | –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ –∏–∑ –∫–∞–Ω–∞–ª–∞ (sync) |

## API Endpoints

| –ú–µ—Ç–æ–¥ | –ü—É—Ç—å | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|------|----------|
| `GET` | `/` | Web-–¥–∞—à–±–æ—Ä–¥ |
| `GET` | `/api/messages` | –°–æ–æ–±—â–µ–Ω–∏—è —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏, —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–æ–π, —Å–∫–æ—Ä–æ–º |
| `POST` | `/api/mark_discussed/{id}` | –ü–æ–º–µ—Ç–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –∫–∞–∫ –æ–±—Å—É–∂–¥—ë–Ω–Ω–æ–µ |
| `GET` | `/api/download_db` | –°–∫–∞—á–∞—Ç—å –ë–î |
| `POST` | `/start_cron` | –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ñ–æ–Ω–æ–≤—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É |
| `POST` | `/stop_cron` | –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å cron worker |
| `GET` | `/cron_status` | –°—Ç–∞—Ç—É—Å cron worker |
| `GET` | `/read_messages` | –ü—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è (JSON) |
| `GET` | `/sent_messages` | –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è (JSON) |
| `POST` | `/renew_msg_data` | –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å –∫–∞–Ω–∞–ª–æ–º |

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤

```
GET /api/messages?from_date=2024-01-01&status=sent&sort_by=score&sort_order=desc
GET /read_messages?from_date=2024-01-01&to_date=2024-01-31&status=summarized
GET /sent_messages?from_date=2024-01-01&to_date=2024-01-31&status=sent
```

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|------------|----------|
| `TGHELPER_API_ID` | Telegram API ID |
| `TGHELPER_API_HASH` | Telegram API Hash |
| `TGHELPER_BOT_TOKEN` | –¢–æ–∫–µ–Ω –±–æ—Ç–∞ |
| `OPENAI_API_KEY` | OpenAI API –∫–ª—é—á |
| `TGHELPER_FOLDER_NAME` | –ò–º—è –ø–∞–ø–∫–∏ —Å –∫–∞–Ω–∞–ª–∞–º–∏ |
| `TGHELPER_OUTPUT_CHANNEL_ID` | –ö–∞–Ω–∞–ª –¥–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ |

### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é | –û–ø–∏—Å–∞–Ω–∏–µ |
|------------|--------------|----------|
| `TGHELPER_MOCK` | `true` | Mock-—Ä–µ–∂–∏–º (–±–µ–∑ –æ—Ç–ø—Ä–∞–≤–∫–∏) |
| `TGHELPER_MESSAGE_LIMIT` | `100` | –õ–∏–º–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏–π –Ω–∞ –∫–∞–Ω–∞–ª |
| `TGHELPER_POLL_DELAY` | `0.7` | –ó–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –∫–∞–Ω–∞–ª–∞–º–∏ (—Å–µ–∫) |
| `TGHELPER_DUCKDB_PATH` | `./data/main` | –ü—É—Ç—å –∫ –ë–î |
| `TGHELPER_SEND_CONCURRENCY` | `5` | –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –æ—Ç–ø—Ä–∞–≤–æ–∫ |
| `TGHELPER_EMODJI_WINDOW_DAYS` | `10` | –û–∫–Ω–æ –ø–æ–¥—Å—á—ë—Ç–∞ —Ä–µ–∞–∫—Ü–∏–π (–¥–Ω–∏) |
| `TGHELPER_DEDUP_WINDOW_DAYS` | `4` | –û–∫–Ω–æ –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–∏ (–¥–Ω–∏) |
| `TGHELPER_DEFAULT_START_DATE` | `2025-10-01` | –î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é |
| `TGHELPER_REQUIRED_HASHTAGS` | `#news` | –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —Ö–µ—à—Ç–µ–≥–∏ (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é) |
| `TGHELPER_SCORER_MIN_SAMPLES` | `30` | –ú–∏–Ω. –ø—Ä–∏–º–µ—Ä–æ–≤ –¥–ª—è —Å–∫–æ—Ä–µ—Ä–∞ |
| `TGHELPER_SCORER_TRAINING_DAYS` | `30` | –û–∫–Ω–æ –æ–±—É—á–µ–Ω–∏—è —Å–∫–æ—Ä–µ—Ä–∞ (–¥–Ω–∏) |
| `TGHELPER_SCORER_POS_THRESHOLD` | `0.6` | –ü–æ—Ä–æ–≥ –¥–ª—è üëç —Ä–µ–∞–∫—Ü–∏–∏ |
| `TGHELPER_SCORER_NEG_THRESHOLD` | `0.4` | –ü–æ—Ä–æ–≥ –¥–ª—è üëé —Ä–µ–∞–∫—Ü–∏–∏ |
| `TGHELPER_LOW_SCORE_SEND_PROBABILITY` | `0.3` | –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø—Ä–∏ low score |

## Docker

```bash
# Build –∏ –∑–∞–ø—É—Å–∫
docker-compose up -d

# –õ–æ–≥–∏
docker-compose logs -f

# –î–µ–ø–ª–æ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä
./deploy.sh 123.45.67.89 ~/.ssh/your_key
```

## Development

```bash
# –õ–∏–Ω—Ç–∏–Ω–≥
ruff check .

# –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
ruff format .

# –ê–≤—Ç–æ—Ñ–∏–∫—Å
ruff check --fix .
```

## Code Style

- –û–¥–∏–Ω–∞—Ä–Ω—ã–µ –∫–∞–≤—ã—á–∫–∏ –¥–ª—è —Å—Ç—Ä–æ–∫
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ —Å—Ç—Ä–æ–∫–∏: 120 —Å–∏–º–≤–æ–ª–æ–≤
- Docstrings –≤ Google-—Å—Ç–∏–ª–µ (–Ω–∞ —Ä—É—Å—Å–∫–æ–º)
- `ruff check --fix .` –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º
